<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0"
    />
    <title>Item</title>
    <script type="module" src="/build/pie-player-components.esm.js"></script>
    <script nomodule src="/build/pie-player-components.js"></script>
  </head>
  <body>
    <pie-author config="evan" id="author"></pie-author>

    <script>
      const config = {
        id: '1',
        elements: {
          'pie-multiple-choice': '@pie-element/multiple-choice@latest'
        },
        models: [
          {
            id: '1',
            element: 'pie-multiple-choice',
            prompt: 'What is the theme of this poem?',
            choiceMode: 'checkbox',
            keyMode: 'numbers',
            choices: [
              {
                correct: true,
                value: 'sorrow',
                label: 'Sorrow',
                feedback: {
                  type: 'none',
                  value: ''
                }
              },
              {
                value: 'contemplation',
                label: 'Contemplation',
                feedback: {
                  type: 'none',
                  value: ''
                }
              },
              {
                value: 'loneliness',
                label: 'Loneliness',
                feedback: {
                  type: 'none',
                  value: ''
                }
              },
              {
                correct: true,
                value: 'envy',
                label: 'Envy',
                feedback: {
                  type: 'none',
                  value: ''
                }
              }
            ],
            partialScoring: false,
            partialScoringLabel: `Each correct response that is correctly checked and each incorrect response
              that is correctly unchecked will be worth 1 point.
              The maximum points is the total number of answer choices.`
          }
        ],
        markup: `
            <pie-multiple-choice id='1'></pie-multiple-choice>
          `
      };

      const author = document.getElementById('author');

      author.addEventListener('model-updated', event => {
        console.log(event.type + ':' + JSON.stringify(event.detail));
      });

      author.config = config;
      author.configSettings = {'@pie-element/multiple-choice': { "foo": "bar"} };

      // await page.setContent('<pie-author config="evan"></pie-author>');
      // pieAuthor = await page.find('pie-author');
      // setupInterceptPieCloud(page,  pie);
      // pieAuthor.setProperty('configSettings', {'@pie-element/multiple-choice': { "foo": "bar"} });
      // pieAuthor.setProperty('config', simplePieMock)
      // await page.waitForChanges();
      // const el = await page.waitForSelector('pie-author');
      // expect(el).toBeDefined();
      // const configEl = await page.find('pie-multiple-choice-config');
      // console.log(`got config el ${configEl.innerHTML}`);
      // const configure = await configEl.getProperty('configure');
      // expect(configure.foo).toEqual("bar");

    </script>
  </body>
</html>



