<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
  <meta charset="utf-8"/>
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0"
  />
  <title>Item With Stimulus</title>
  <script nomodule src="/build/pie-player-components.js"></script>
  <script type="module" src="/build/pie-player-components.esm.js"></script>
</head>
<body>
<div>
  <h2>render stimulus</h2>
  <button id="updateConfig">Update Config</button>
  <pie-player id="player" render-stimulus="true"></pie-player>
</div>

<script type="text/javascript" src="./utils/models.js"></script>
<script>
  const one = {
    pie: {
      models: [SelectText_model],
      elements: { "select-text": "@pie-element/select-text@latest" },
      id: "8a8080815af1cb83015af728397a04a6@0.0.17",
      markup: '<select-text id="8a8080815af1cb83015af728397a04a6"></select-text>'
    },
    passage: {
      buildInfo: [{ name: "@pie-element/passage", version: "latest" }],
      layout: "left",
      markup: '<pie-passage id="4028e4a24118948301411e5ec1f11701"></pie-passage>',
      id: "4028e4a24118948301411e5ec1f11701",
      elements: { "pie-passage": "@pie-element/passage@latest" },
      models: [Passage_model]
    }
  };

  const config = {
    pie: {
      models: [SelectText_with_correctness_model],
      elements: { "select-text": "@pie-element/select-text@latest" },
      id: "8a8080815af1cb83015af728397a04a6@0.0.17",
      markup: '<select-text id="8a8080815af1cb83015af728397a04a6"></select-text>'
    },
    passage: {
      buildInfo: [{ version: "latest", name: "@pie-element/passage" }],
      layout: "left",
      markup: '<pie-passage id="4028e4a24118948301411e5ec1f11701"></pie-passage>',
      id: "4028e4a24118948301411e5ec1f11701",
      elements: { "pie-passage": "@pie-element/passage@latest" },
      models: [SelectText_model]
    }
  };

  const player = document.getElementById("player");
  const updateConfig = document.querySelector("#updateConfig");

  player.addEventListener("sessionChanged", event => {
    console.log(event.type + ":" + JSON.stringify(event.detail));
  });

  updateConfig.addEventListener("click", () => {
    player.config = config;
  });

  // noStimulus.addEventListener("sessionChanged", event => {
  //   console.log(event.type + ":" + JSON.stringify(event.detail));
  // });

  player.env = { mode: "evaluate", role: "instructor" };
  player.config = one;
  // noStimulus.config = config;
  // noStimulus.env = { mode: "evaluate", role: "instructor" };
</script>
</body>
</html>
