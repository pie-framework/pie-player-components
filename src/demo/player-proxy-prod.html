<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
  <meta charset="utf-8"/>
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0"
  />
  <title>Item Player</title>

  <!--    <script-->
  <!--      type="module"-->
  <!--      src="https://unpkg.com/@pie-framework/pie-player-components@latest/dist/pie-player-components/pie-player-components.esm.js"-->
  <!--    ></script>-->

  <!-- <script nomodule src="/build/pie-player-components.js"></script> -->
  <script type="module" src="/build/pie-player-components.esm.js"></script>
  <script nomodule src="/build/pie-player-components.js"></script>
</head>
<body>
<pie-player id="player"></pie-player>

<script type="text/javascript" src="./utils/models.js"></script>
<script>
  const config = {
    "pie": {
      "id": "81b8dd41-469c-4960-8828-8956e88b7735@0.0.1-draft.17",
      "models": [
        {
          "disabled": false,
          "mode": "gather",
          "prompt": "V2",
          "choicesLayout": "vertical",
          "gridColumns": "2",
          "keyMode": "letters",
          "choices": [],
          "teacherInstructions": null,
          "id": "1",
          "element": "multiple-choice"
        }
      ],
      "elements": {
        "multiple-choice": "@pie-element/multiple-choice@7.7.0"
      },
      "markup": "<multiple-choice id=\"1\"></multiple-choice>"
    },
    "passage": {
      "id": "66815477-6de4-4cba-908d-1998bd228b43@0.0.1-draft.3",
      "models": [
        {
          "id": "1",
          "element": "pie-passage",
          "passages": [
            {
              "title": "Passage title Andreea",
              "text": "<p>Passage Content</p>"
            }
          ]
        }
      ],
      "elements": {
        "pie-passage": "@pie-element/passage@1.9.0"
      },
      "markup": "<pie-passage id=\"1\"></pie-passage>"
    }
  };
  const player = document.getElementById('player');

  // player.bundleEndpoints = {
  //   bundleBase: "https://pits-cdn.pie-api.io/bundles/",
  //   buildServiceBase: "https://pits-dot-pie-prod-221718.appspot.com/bundles/"
  // };

  document.addEventListener("session-changed", e => console.log(">", e));

  player.addEventListener('sessionChanged', event => {
    console.log(event.type + ':' + JSON.stringify(event.detail));
  });

  player.env = { mode: 'view', role: 'student' }
  player.config = config;
  player.bundleHost = 'prod';
</script>
</body>
</html>
